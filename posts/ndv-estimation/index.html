<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>NDV Estimation in Query Optimization | Dongyan's Blog</title>
<meta name=keywords content><meta name=description content="When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let&rsquo;s explore how this works in a practical way.
What is NDV?
NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a &ldquo;country&rdquo; column might have only 50 distinct values since many customers are from the same countries."><meta name=author content="Dongyan Zhou"><link rel=canonical href=https://zhoudongyan.github.io/posts/ndv-estimation/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zhoudongyan.github.io/posts/ndv-estimation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WWM36JF36Q"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WWM36JF36Q")}</script><meta property="og:url" content="https://zhoudongyan.github.io/posts/ndv-estimation/"><meta property="og:site_name" content="Dongyan's Blog"><meta property="og:title" content="NDV Estimation in Query Optimization"><meta property="og:description" content="When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let’s explore how this works in a practical way.
What is NDV? NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a “country” column might have only 50 distinct values since many customers are from the same countries."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-03T14:15:29+08:00"><meta property="article:modified_time" content="2024-12-03T14:15:29+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NDV Estimation in Query Optimization"><meta name=twitter:description content="When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let&rsquo;s explore how this works in a practical way.
What is NDV?
NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a &ldquo;country&rdquo; column might have only 50 distinct values since many customers are from the same countries."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zhoudongyan.github.io/posts/"},{"@type":"ListItem","position":2,"name":"NDV Estimation in Query Optimization","item":"https://zhoudongyan.github.io/posts/ndv-estimation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"NDV Estimation in Query Optimization","name":"NDV Estimation in Query Optimization","description":"When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let\u0026rsquo;s explore how this works in a practical way.\nWhat is NDV? NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a \u0026ldquo;country\u0026rdquo; column might have only 50 distinct values since many customers are from the same countries.\n","keywords":[],"articleBody":"When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let’s explore how this works in a practical way.\nWhat is NDV? NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a “country” column might have only 50 distinct values since many customers are from the same countries.\nWhy is NDV Estimation Important? Accurate NDV estimation helps databases to:\nChoose optimal query execution plans Allocate memory and resources efficiently Predict result set sizes accurately Optimize join operations How to Estimate NDV? The estimation method adapts based on data characteristics. Let’s explore two main approaches:\n1. High Cardinality Case When data is highly unique (over 90% distinct values), we use a simple linear scaling method:\nestimatedNDV = (distinctValues/totalRows) * newRowCount Example:\nOriginal data: 1000 rows with 950 distinct values (95% unique) Target: Sample down to 100 rows Calculation: (950/1000) * 100 = 95 distinct values expected This method works well for columns like:\nPrimary keys Timestamps Unique identifiers 2. Normal Case: Poisson-based Estimation For typical cases (less than 90% unique values), we use a Poisson-based formula:\nestimatedNDV = currentNDV * (1 - Math.pow(1 - samplingRatio, totalRows/currentNDV)) Let’s break down this formula step by step:\nComponents Explained Sampling Ratio (samplingRatio = targetRows/totalRows)\nRepresents the fraction of data we’re keeping Example: Sampling 200 rows from 1000 → ratio = 0.2 (20%) Average Frequency (totalRows/currentNDV)\nShows how often each distinct value appears on average Example: 1000 rows with 200 distinct values → average frequency = 5 Miss Probability (1 - samplingRatio)\nChance of not selecting a specific row Example: 20% sampling → 80% (0.8) chance of missing each row Complete Miss Probability (Math.pow(1 - samplingRatio, frequency))\nProbability of missing all occurrences of a value Accounts for multiple occurrences of each value Final Estimation (currentNDV * (1 - [miss probability]))\nConverts probabilities into estimated distinct values Adjusts for the sampling size Practical Example Consider these parameters:\nTotal rows: 1000 Current distinct values: 200 Target sample size: 100 Calculation steps:\nSampling ratio = 100/1000 = 0.1 Average frequency = 1000/200 = 5 Miss probability = 1 - 0.1 = 0.9 Complete miss probability = 0.9^5 ≈ 0.59 Survival probability = 1 - 0.59 = 0.41 Estimated distinct values = 200 * 0.41 ≈ 82 This means we expect to see about 82 distinct values in our 100-row sample.\nImplementation Here’s the practical implementation combining both methods:\npublic static double calculateNDV(double distinctValues, double totalRows, double targetRows) { if (totalRows == 0) { return 0; } double ndvRatio = distinctValues / totalRows; double reductionRatio = targetRows / totalRows; return ndvRatio \u003e 0.9 ? ndvRatio * targetRows // High cardinality case : distinctValues * (1 - Math.pow(1 - reductionRatio, totalRows/distinctValues)); } Real-World Applications NDV estimation is crucial for:\nQuery plan optimization Memory allocation Cost-based optimization Data sampling strategies Resource management Best Practices Choose the Right Method\nUse linear scaling for highly unique data Use Poisson-based estimation for normal cases Consider Data Distribution\nAccount for skewed data Monitor estimation accuracy Regular Updates\nKeep statistics up to date Validate estimates periodically Conclusion NDV estimation is fundamental to query optimization. While the mathematics might seem complex, understanding these estimation methods helps in:\nBuilding better database systems Optimizing query performance Making informed decisions about data operations By choosing the appropriate estimation method and implementing it correctly, we can significantly improve database performance and resource utilization.\n","wordCount":"577","inLanguage":"en","datePublished":"2024-12-03T14:15:29+08:00","dateModified":"2024-12-03T14:15:29+08:00","author":{"@type":"Person","name":"Dongyan Zhou"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhoudongyan.github.io/posts/ndv-estimation/"},"publisher":{"@type":"Organization","name":"Dongyan's Blog","logo":{"@type":"ImageObject","url":"https://zhoudongyan.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zhoudongyan.github.io/ accesskey=h title="Dongyan's Blog (Alt + H)"><img src=https://zhoudongyan.github.io/apple-touch-icon.png alt aria-label=logo height=35>Dongyan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zhoudongyan.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://zhoudongyan.github.io/archives/ title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zhoudongyan.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://zhoudongyan.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">NDV Estimation in Query Optimization</h1><div class=post-meta><span title='2024-12-03 14:15:29 +0800 CST'>December 3, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;577 words&nbsp;·&nbsp;Dongyan Zhou</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#what-is-ndv>What is NDV?</a></li><li><a href=#why-is-ndv-estimation-important>Why is NDV Estimation Important?</a></li><li><a href=#how-to-estimate-ndv>How to Estimate NDV?</a><ul><li><a href=#1-high-cardinality-case>1. High Cardinality Case</a></li><li><a href=#2-normal-case-poisson-based-estimation>2. Normal Case: Poisson-based Estimation</a></li></ul></li><li><a href=#implementation>Implementation</a></li><li><a href=#real-world-applications>Real-World Applications</a></li><li><a href=#best-practices>Best Practices</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>When optimizing database queries, one crucial factor is estimating the Number of Distinct Values (NDV) after operations like filtering or sampling. Let&rsquo;s explore how this works in a practical way.</p><h2 id=what-is-ndv>What is NDV?<a hidden class=anchor aria-hidden=true href=#what-is-ndv>#</a></h2><p>NDV (Number of Distinct Values) counts how many unique values exist in a dataset. For instance, in a table with 1000 customer records, a &ldquo;country&rdquo; column might have only 50 distinct values since many customers are from the same countries.</p><h2 id=why-is-ndv-estimation-important>Why is NDV Estimation Important?<a hidden class=anchor aria-hidden=true href=#why-is-ndv-estimation-important>#</a></h2><p>Accurate NDV estimation helps databases to:</p><ul><li>Choose optimal query execution plans</li><li>Allocate memory and resources efficiently</li><li>Predict result set sizes accurately</li><li>Optimize join operations</li></ul><h2 id=how-to-estimate-ndv>How to Estimate NDV?<a hidden class=anchor aria-hidden=true href=#how-to-estimate-ndv>#</a></h2><p>The estimation method adapts based on data characteristics. Let&rsquo;s explore two main approaches:</p><h3 id=1-high-cardinality-case>1. High Cardinality Case<a hidden class=anchor aria-hidden=true href=#1-high-cardinality-case>#</a></h3><p>When data is highly unique (over 90% distinct values), we use a simple linear scaling method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>estimatedNDV</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>distinctValues</span><span class=o>/</span><span class=n>totalRows</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>newRowCount</span><span class=w>
</span></span></span></code></pre></div><p>Example:</p><ul><li>Original data: 1000 rows with 950 distinct values (95% unique)</li><li>Target: Sample down to 100 rows</li><li>Calculation: (950/1000) * 100 = 95 distinct values expected</li></ul><p>This method works well for columns like:</p><ul><li>Primary keys</li><li>Timestamps</li><li>Unique identifiers</li></ul><h3 id=2-normal-case-poisson-based-estimation>2. Normal Case: Poisson-based Estimation<a hidden class=anchor aria-hidden=true href=#2-normal-case-poisson-based-estimation>#</a></h3><p>For typical cases (less than 90% unique values), we use a Poisson-based formula:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>estimatedNDV</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>currentNDV</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>Math</span><span class=p>.</span><span class=na>pow</span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>samplingRatio</span><span class=p>,</span><span class=w> </span><span class=n>totalRows</span><span class=o>/</span><span class=n>currentNDV</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><p>Let&rsquo;s break down this formula step by step:</p><h4 id=components-explained>Components Explained<a hidden class=anchor aria-hidden=true href=#components-explained>#</a></h4><ol><li><p><strong>Sampling Ratio</strong> (<code>samplingRatio = targetRows/totalRows</code>)</p><ul><li>Represents the fraction of data we&rsquo;re keeping</li><li>Example: Sampling 200 rows from 1000 → ratio = 0.2 (20%)</li></ul></li><li><p><strong>Average Frequency</strong> (<code>totalRows/currentNDV</code>)</p><ul><li>Shows how often each distinct value appears on average</li><li>Example: 1000 rows with 200 distinct values → average frequency = 5</li></ul></li><li><p><strong>Miss Probability</strong> (<code>1 - samplingRatio</code>)</p><ul><li>Chance of not selecting a specific row</li><li>Example: 20% sampling → 80% (0.8) chance of missing each row</li></ul></li><li><p><strong>Complete Miss Probability</strong> (<code>Math.pow(1 - samplingRatio, frequency)</code>)</p><ul><li>Probability of missing all occurrences of a value</li><li>Accounts for multiple occurrences of each value</li></ul></li><li><p><strong>Final Estimation</strong> (<code>currentNDV * (1 - [miss probability])</code>)</p><ul><li>Converts probabilities into estimated distinct values</li><li>Adjusts for the sampling size</li></ul></li></ol><h4 id=practical-example>Practical Example<a hidden class=anchor aria-hidden=true href=#practical-example>#</a></h4><p>Consider these parameters:</p><ul><li>Total rows: 1000</li><li>Current distinct values: 200</li><li>Target sample size: 100</li></ul><p>Calculation steps:</p><ol><li>Sampling ratio = 100/1000 = 0.1</li><li>Average frequency = 1000/200 = 5</li><li>Miss probability = 1 - 0.1 = 0.9</li><li>Complete miss probability = 0.9^5 ≈ 0.59</li><li>Survival probability = 1 - 0.59 = 0.41</li><li>Estimated distinct values = 200 * 0.41 ≈ 82</li></ol><p>This means we expect to see about 82 distinct values in our 100-row sample.</p><h2 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h2><p>Here&rsquo;s the practical implementation combining both methods:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=nf>calculateNDV</span><span class=p>(</span><span class=kt>double</span><span class=w> </span><span class=n>distinctValues</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>totalRows</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>targetRows</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>totalRows</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>ndvRatio</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>distinctValues</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>totalRows</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>reductionRatio</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>targetRows</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>totalRows</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ndvRatio</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>.</span><span class=na>9</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=o>?</span><span class=w> </span><span class=n>ndvRatio</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>targetRows</span><span class=w>  </span><span class=c1>// High cardinality case</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=p>:</span><span class=w> </span><span class=n>distinctValues</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>Math</span><span class=p>.</span><span class=na>pow</span><span class=p>(</span><span class=n>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>reductionRatio</span><span class=p>,</span><span class=w> </span><span class=n>totalRows</span><span class=o>/</span><span class=n>distinctValues</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=real-world-applications>Real-World Applications<a hidden class=anchor aria-hidden=true href=#real-world-applications>#</a></h2><p>NDV estimation is crucial for:</p><ul><li>Query plan optimization</li><li>Memory allocation</li><li>Cost-based optimization</li><li>Data sampling strategies</li><li>Resource management</li></ul><h2 id=best-practices>Best Practices<a hidden class=anchor aria-hidden=true href=#best-practices>#</a></h2><ol><li><p><strong>Choose the Right Method</strong></p><ul><li>Use linear scaling for highly unique data</li><li>Use Poisson-based estimation for normal cases</li></ul></li><li><p><strong>Consider Data Distribution</strong></p><ul><li>Account for skewed data</li><li>Monitor estimation accuracy</li></ul></li><li><p><strong>Regular Updates</strong></p><ul><li>Keep statistics up to date</li><li>Validate estimates periodically</li></ul></li></ol><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>NDV estimation is fundamental to query optimization. While the mathematics might seem complex, understanding these estimation methods helps in:</p><ul><li>Building better database systems</li><li>Optimizing query performance</li><li>Making informed decisions about data operations</li></ul><p>By choosing the appropriate estimation method and implementing it correctly, we can significantly improve database performance and resource utilization.</p></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share NDV Estimation in Query Optimization on x" href="https://x.com/intent/tweet/?text=NDV%20Estimation%20in%20Query%20Optimization&amp;url=https%3a%2f%2fzhoudongyan.github.io%2fposts%2fndv-estimation%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NDV Estimation in Query Optimization on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fzhoudongyan.github.io%2fposts%2fndv-estimation%2f&amp;title=NDV%20Estimation%20in%20Query%20Optimization&amp;summary=NDV%20Estimation%20in%20Query%20Optimization&amp;source=https%3a%2f%2fzhoudongyan.github.io%2fposts%2fndv-estimation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://zhoudongyan.github.io/>Dongyan's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>